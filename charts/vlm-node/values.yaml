# Default values for vlm-node
# This is a YAML-formatted file.

# Service Account configuration
serviceAccount:
  create: true
  name: ""
  annotations: {}

# Server configuration
server:
  enabled: true
  replicas: 1
  image:
    repository: 026987513085.dkr.ecr.us-east-1.amazonaws.com/vlm-node-server
    tag: "latest"
    pullPolicy: Always
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "100m"
  ports:
    main: 8080
    admin: 18190
  tolerations:
    - key: "dedicated"
      value: "vlmGroup"
      effect: "NoSchedule"

# Worker configuration
worker:
  enabled: true
  replicas: 1
  image:
    repository: 026987513085.dkr.ecr.us-east-1.amazonaws.com/vlm-node-worker
    tag: "latest"
    pullPolicy: Always
  ports:
    main: 8081 
  resources:
    requests:
      memory: "256Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "100m"

ollama:
  image:
    repository: alpine/ollama
    tag: "0.11.10"
    pullPolicy: IfNotPresent
  resources:
    requests:
      memory: "2Gi"
      cpu: "500m"
    limits:
      memory: "16Gi"
      cpu: "2"

# UI configuration
ui:
  enabled: true
  replicas: 1
  port: 3000
  image:
    repository: 026987513085.dkr.ecr.us-east-1.amazonaws.com/vlm-node-ui
    tag: "latest"
    pullPolicy: Always
  resources:
    requests:
      memory: "128Mi"
      cpu: "100m"
    limits:
      memory: "256Mi"
      cpu: "200m"

# Database configuration
postgresql:
  # If true, the PostgreSQL dependency is enabled
  enabled: false
  url: "placeholder"
  global:
    # defaultStorageClass: ""
    postgresql:
      auth:
        username: vlm-node
        password: vlm-node
        database: vlm-node
  primary:
    networkPolicy:
      enabled: false
    resources:
      limits:
        cpu: 1
        memory: 256Mi
        ephemeral-storage: 2Gi
      requests:
        cpu: 100m
        memory: 128Mi
        ephemeral-storage: 50Mi
  fullnameOverride: "vlm-node-postgresql"

# Storage configuration
storage:
  enabled: true
  storageClass: "gp2"  # Default to gp2, can be overridden for other clouds
  size: "100Gi"
  accessMode: ReadWriteOnce
  mountPath: /app/data

# Ingress configuration
ingress:
  enabled: true
  annotations:
    kubernetes.io/ingress.class: alb
    alb.ingress.kubernetes.io/scheme: internet-facing
    alb.ingress.kubernetes.io/group.name: default
    alb.ingress.kubernetes.io/target-type: ip
    alb.ingress.kubernetes.io/listen-ports: '[{"HTTPS":443}]'
  hosts:
    - vlm-node
  tls:
    - hosts:
        - vlm-node

# Service configuration
service:
  type: ClusterIP
  annotations: {}

# Security configuration
security:
  createSecret: false
  existingSecretName: "vlm-node"
  posemeshEmail: "changeme"
  posemeshPassword: "changeme"

# Labels and annotations
labels: {}
annotations: {}
